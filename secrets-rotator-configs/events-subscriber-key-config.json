{
  "source": {
    "name": "API Gateway API key",
    "action": {
      "type": "AWS_GATEWAY_API_KEY_SOURCE",
      "usagePlanId": "${USAGE_PLAN_ID}",
      "region": "${REGION}",
      "authentication": {
        "type": "AWS_ACCOUNT",
        "credentials": {
          "accessKeyId": "${AWS_ACCESS_KEY_ID}",
          "secretAccessKey": "${AWS_SECRET_ACCESS_KEY}",
          "sessionToken": "${AWS_SESSION_TOKEN}"
        }
      }
    }
  },
  "consumers": [
    {
      "name": "Team event subscription token",
      "action": {
        "type": "EVENT_SUBSCRIPTION_TOKEN",
        "eventSubscriptionName": "${TEAM_EVENTS_SUBSCRIPTION_NAME}",
        "eventSubscriptionAuthHeaderName": "${EVENT_SUBSCRIPTION_AUTH_HEADER_NAME}",
        "apiPlatformUrl": "${API_PLATFORM_URL}",
        "authentication": {
          "clientId": "${API_PLATFORM_CLIENT_ID}",
          "clientSecret": "${API_PLATFORM_CLIENT_SECRET}",
          "grantType": "client_credentials",
          "scope": "api",
          "tokenUrl": "${API_PLATFORM_TOKEN_URL}",
          "type": "OAUTH_2"
        }
      }
    }
  ]
}