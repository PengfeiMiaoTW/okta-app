{
  "source": {
    "name": "${SOURCE_NAME}",
    "action": {
      "type": "API_PLATFORM_CLIENT_SECRET",
      "apiPlatformUrl": "${API_PLATFORM_URL}",
      "authentication": {
        "clientId": "${API_PLATFORM_CLIENT_ID}",
        "clientSecret": "${API_PLATFORM_CLIENT_SECRET}",
        "tokenUrl": "${API_PLATFORM_TOKEN_URL}",
        "scope": "${API_PLATFORM_ACCESS_TOKEN_SCOPE}",
        "grantType": "${API_PLATFORM_ACCESS_TOKEN_GRANT_TYPE}",
        "type": "OAUTH_2"
      }
    }
  },
  "consumers": [
    {
      "name": "Test Secret Manager 1",
      "action": {
        "type": "GCP_SECRET_MANAGER_CONSUMER",
        "secretName": "${GCP_SECRET_NAME}",
        "keyFieldName": "apiPlatform.clientSecret",
        "projectId": "${GCP_PROJECT_ID}",
        "authentication": {
          "scopes": [],
          "type": "GCP_SERVICE_ACCOUNT",
          "credentials": "${GCLOUD_KEY}"
        }
      },
      "redeploy": {
        "workflowId": "${WORKFLOW_ID}",
        "jobId": "${JOB_ID}",
        "accessToken": "${CIRCLE_CI_ACCESS_TOKEN}"
      }
    }
  ]
}
