{
  "source": {
    "name": "${SOURCE_NAME}",
    "action": {
      "type": "API_PLATFORM_CLIENT_SECRET",
      "apiPlatformUrl": "${API_PLATFORM_URL}",
      "authentication": {
        "clientId": "${API_PLATFORM_CLIENT_ID}",
        "clientSecret": "${API_PLATFORM_CLIENT_SECRET}",
        "tokenUrl": "${API_PLATFORM_TOKEN_URL}",
        "scope": "${API_PLATFORM_ACCESS_TOKEN_SCOPE}",
        "grantType": "${API_PLATFORM_ACCESS_TOKEN_GRANT_TYPE}",
        "type": "OAUTH_2"
      }
    }
  },
  "consumers": [
    {
      "name": "AWS Secret Manager ",
      "action": {
        "type": "AWS_SECRET_MANAGER_CONSUMER",
        "secretId": "${AWS_SECRET_NAME}",
        "keyFieldNames": [
          {
            "keyFieldName": "apiPlatform.clientSecret",
            "isValueArray": true
          },
          {
            "keyFieldName": "eventsPublisherClientSecret"
          }
        ],
        "region": "AWS_REGION",
        "authentication": {
          "type": "AWS_ACCOUNT",
          "credentials": {
            "accessKeyId": "access key Id",
            "secretAccessKey": "aws secret access key",
            "sessionToken": "aws session token"
          }
        }
      },
      "redeploy": {
        "workflowId": "${WORKFLOW_ID}",
        "jobId": "${JOB_ID}",
        "accessToken": "${CIRCLE_CI_ACCESS_TOKEN}"
      }
    }
  ]
}
